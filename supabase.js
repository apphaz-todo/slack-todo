import { createClient } from '@supabase/supabase-js'

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DEBUG: Supabase ENV sanity check
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
console.log('ğŸ—„ï¸ Initializing Supabase client')
console.log('SUPABASE ENV CHECK:', {
  hasUrl: !!process.env.SUPABASE_URL,
  hasAnonKey: !!process.env.SUPABASE_ANON_KEY,
  urlPreview: process.env.SUPABASE_URL
    ? process.env.SUPABASE_URL.substring(0, 30) + '...'
    : 'MISSING'
})

export const supabase = createClient(
  process.env.SUPABASE_URL,
  process.env.SUPABASE_ANON_KEY,
  {
    auth: {
      persistSession: false
    }
  }
)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DEBUG HELPERS (OPTIONAL USE)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export async function debugSupabaseConnection() {
  console.log('ğŸ” Testing Supabase connection...')

  const { data, error } = await supabase
    .from('tasks')
    .select('id')
    .limit(1)

  if (error) {
    console.error('âŒ Supabase connection FAILED:', error)
    return false
  }

  console.log('âœ… Supabase connection OK')
  return true
}
